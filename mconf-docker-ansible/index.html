<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Mconf</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/night.css" id="theme">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h2>Deployando o Mconf</h2>
					<h3>Docker e Ansible</h3>
				</section>

				<section>
            <h3>Automação do deploy = indispensável</h3>
					  <ul>
						    <li>Fácil de reproduzir</li>
						    <li>Documentado (com o código)</li>
						    <li>Menor risco de erros humanos</li>
						    <li>Mais confiança</li>
					  </ul>
				</section>

        <section>
            <h3>Hoje = Capistrano + Chef</h3>
            <pre style="max-width:800px;"><code class="hljs" data-trim contenteditable style="padding:20px;">
            > ssh mconf@servidor.com
            > chef-client solo.json
            </code></pre>

            <p><small>
                <ul>
                    <li><a href="https://github.com/mconftec/mconf-caphub/blob/master/config/deploy/mconf-web/rnp-staging.rb">https://github.com/mconftec/mconf-caphub/blob/master/config/deploy/mconf-web/rnp-staging.rb</a></li>
                    <li><a href="https://github.com/mconftec/mconf-caphub/blob/master/config-files/chef/mconf-web/rnp-staging/solo.json">https://github.com/mconftec/mconf-caphub/blob/master/config-files/chef/mconf-web/rnp-staging/solo.json</a></li>
                    <li><a href="http://github.com/mconf-cookbooks/">http://github.com/mconf-cookbooks</a></li>
                    <li><a href="https://github.com/mconf-cookbooks/mconf-lb/blob/master/recipes/default.rb">https://github.com/mconf-cookbooks/mconf-lb/blob/master/recipes/default.rb</a></li>
                </ul>
            </small></p>
				</section>

        <section data-background="#c94a56">
            <h3 style="max-width:800px;text-align:center;margin:0 40% 0 auto;"><q>&ldquo;Resolvido está, agora só falta resolver bonito&rdquo;</q></h3>
            <img width="400" height="605" data-src="images/rafa.png" alt="Petersen" style="border:none;box-shadow:none;background:none;margin-top:-50px;margin-left:45%;">
				</section>

        <section data-background="#c94a56" data-transition="zoom-in slide-out" data-transition-speed="slow" data-fullscreen>
            <canvas id="confetti" style="position:fixed;left:0;top:0;right:0;bottom:0;"></canvas>
            <img width="2440" height="1942" data-src="images/bonito.png" alt="BONITO" style="border:none;box-shadow:none;background:none;height:100%;">
				</section>

        <section>
            <h3>&check; Facilitar e agilizar deploy</h3>
            <h3>&check; Facilitar setup de desenvolvimento</h3>
            <p><small>
                <ul>
                    <li>Microserviços</li>
                    <li>Separação entre build e deploy</li>
                    <li>Aproximar dev e prod</li>
                </ul>
            </small></p>
        </section>

        <section data-background-color="#253237">
            <img src="images/docker.png" style="border:0;box-shadow:none;" />
            <p>Ferramenta para trabalhar com containers (!= vm)</p>
            <p>Acaba com o "funciona na minha máquina"</p>
            <p>Desenvolvimento e produção</p>
        </section>

  		  <section data-background-color="white">
            <h5 style="color:#333;">The Matrix From Hell</h5>
            <img src="images/the-matrix-from-hell.png" style="border:0;box-shadow:none;" />
        </section>

  		  <section data-background-color="white">
            <h5 style="color:#333;">Also a Matrix From Hell</h5>
            <img src="images/also-a-matrix-from-hell.png" style="border:0;box-shadow:none;" />
        </section>

        <section data-background-color="white">
            <h5 style="color:#333;">Shipping Container</h5>
            <img src="images/shipping-container.png" style="border:0;box-shadow:none;" />
        </section>

  		  <section data-background-color="white"> <img src="images/container-vm.png" style="border:0;box-shadow:none;" /></section>

        <section>
            <h2>Pontos fortes</h2>
            <ul><small>
                <li>Isola dependências (elimina conflitos)</li>
                <li>Portável</li>
                <li>Imagens, snapshots</li>
                <li>Automação, repetição</li>
                <li>Reduz inconsistências dev, test, prod</li>
            </small></ul>
            <img width="250" height="259" data-src="images/forte.png" alt="FORTE" style="border:none;box-shadow:none;background:none;position:fixed;right:0;bottom:0;">
        </section>

        <section>
            <h2>Um container, uma aplicação</h2>
            <p>Exemplo portal</p>
            <ul><small>
                <li>Apache</li>
                <li>Passenger</li>
                <li>Redis</li>
                <li>Monit</li>
                <li>Ruby</li>
                <li>Dependências (gems e pacotes)</li>
                <li>Mconf-Web</li>
                <li>+ Arquivos de configuração</li>
            </small></ul>
        </section>

        <section data-background-video="images/polo-hands-nosound.mp4" data-background-video-loop="loop" data-background-color="#000">
            <!-- <h1 style="margin-top:40%;margin-left:50px;text-align:left;" class="fragment">DEMO</h1> -->
        </section>

        <section data-background="images/demons.jpg" data-background-color="#000">
            <h1 style="margin-bottom:30%;text-align:center;color:red;text-shadow:2px 2px 2px orange;">DEMO</h1>
        </section>
        <!-- <section data-background="images/demo.gif">
             <h1 style="margin-top:40%;margin-left:50px;text-align:left;">DEMO</h1>
             </section> -->

        <section>
            <img src="images/ansible.png" style="border:0;box-shadow:none;background:none;max-width:200px;" />
            <h2>Ansible</h2>
            <p>Automação de infraestrutura</p>
            <p>Deploy + Configuração + Entrega contínua</p>
            <p>ssh na máquina + faz algo</p>
        </section>

        <section data-background-color="#55b3c2">
            <img src="images/ansible-features.png" style="border:0;box-shadow:none;background:none;" />
        </section>

        <section data-background-color="#fff">
            <img src="images/ansible-how-to-run.png" style="border:0;box-shadow:none;background:none;" />
        </section>

        <section data-background="images/demo2.gif">
            <h1 style="margin-bottom:40%;text-align:right;text-shadow:1px 1px 1px black;margin-right:50px;">DEMO</h1>
        </section>

        <section data-background-video="images/polo-cry-nosound.mp4" data-background-video-loop="loop" data-background-color="#000">
            <h1 style="margin-top:40%;margin-left:50px;text-align:left;">FIM :'(</h1>
        </section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

     (function() {
         var COLORS, Confetti, NUM_CONFETTI, PI_2, canvas, confetti, context, drawCircle, drawCircle2, drawCircle3, i, range, xpos;

         NUM_CONFETTI = 60;

         COLORS = [[255, 255, 255], [255, 144, 0], [255, 255, 255], [255, 144, 0], [0, 277, 235]];

         PI_2 = 2 * Math.PI;

         canvas = document.getElementById("confetti");

         context = canvas.getContext("2d");

         window.w = 0;

         window.h = 0;

         window.resizeWindow = function() {
             window.w = canvas.width = window.innerWidth;
             return window.h = canvas.height = window.innerHeight;
         };

         window.addEventListener('resize', resizeWindow, false);

         window.onload = function() {
             return setTimeout(resizeWindow, 0);
         };

         range = function(a, b) {
             return (b - a) * Math.random() + a;
         };

         drawCircle = function(x, y, r, style) {
             context.beginPath();
             context.moveTo(x, y);
             context.bezierCurveTo(x - 17, y + 14, x + 13, y + 5, x - 5, y + 22);
             context.lineWidth = 3;
             context.strokeStyle = style;
             return context.stroke();
         };

         drawCircle2 = function(x, y, r, style) {
             context.beginPath();
             context.moveTo(x, y);
             context.lineTo(x + 10, y + 10);
             context.lineTo(x + 10, y);
             context.closePath();
             context.fillStyle = style;
             return context.fill();
         };

         drawCircle3 = function(x, y, r, style) {
             context.beginPath();
             context.moveTo(x, y);
             context.lineTo(x + 10, y + 10);
             context.lineTo(x + 10, y);
             context.closePath();
             context.fillStyle = style;
             return context.fill();
         };

         xpos = 0.9;

         document.onmousemove = function(e) {
             return xpos = e.pageX / w;
         };

         window.requestAnimationFrame = (function() {
             return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(callback) {
                 return window.setTimeout(callback, 100 / 20);
             };
         })();

         Confetti = (function() {
             function Confetti() {
                 this.style = COLORS[~~range(0, 5)];
                 this.rgb = "rgba(" + this.style[0] + "," + this.style[1] + "," + this.style[2];
                 this.r = ~~range(2, 6);
                 this.r2 = 2 * this.r;
                 this.replace();
             }

             Confetti.prototype.replace = function() {
                 this.opacity = 0;
                 this.dop = 0.03 * range(1, 4);
                 this.x = range(-this.r2, w - this.r2);
                 this.y = range(-20, h - this.r2);
                 this.xmax = w - this.r;
                 this.ymax = h - this.r;
                 this.vx = range(0, 2) + 8 * xpos - 5;
                 return this.vy = 0.7 * this.r + range(-1, 1);
             };

             Confetti.prototype.draw = function() {
                 var ref;
                 this.x += this.vx;
                 this.y += this.vy;
                 this.opacity += this.dop;
                 if (this.opacity > 1) {
                     this.opacity = 1;
                     this.dop *= -1;
                 }
                 if (this.opacity < 0 || this.y > this.ymax) {
                     this.replace();
                 }
                 if (!((0 < (ref = this.x) && ref < this.xmax))) {
                     this.x = (this.x + this.xmax) % this.xmax;
                 }
                 drawCircle(~~this.x, ~~this.y, this.r, this.rgb + "," + this.opacity + ")");
                 drawCircle3(~~this.x * 0.5, ~~this.y, this.r, this.rgb + "," + this.opacity + ")");
                 return drawCircle2(~~this.x * 1.5, ~~this.y * 1.5, this.r, this.rgb + "," + this.opacity + ")");
             };

             return Confetti;

         })();

         confetti = (function() {
             var j, ref, results;
             results = [];
             for (i = j = 1, ref = NUM_CONFETTI; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {
                 results.push(new Confetti);
             }
             return results;
         })();

         window.step = function() {
             var c, j, len, results;
             requestAnimationFrame(step);
             context.clearRect(0, 0, w, h);
             results = [];
             for (j = 0, len = confetti.length; j < len; j++) {
                 c = confetti[j];
                 results.push(c.draw());
             }
             return results;
         };

         step();

     }).call(this);




     /* Reveal.addEventListener( 'slidechanged', function( event ) {
      *     if (event.indexh == 4) {
      *     } else {
      *     }
      * } );*/

		 // More info https://github.com/hakimel/reveal.js#configuration
		 Reveal.initialize({
				 controls: false,
				 progress: true,
				 history: true,
				 center: true,
         width: '100%',
         height: '100%',

				 transition: 'slide', // none/fade/slide/convex/concave/zoom

				 // More info https://github.com/hakimel/reveal.js#dependencies
				 dependencies: [
					   { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					   { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					   { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					   { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					   { src: 'plugin/zoom-js/zoom.js', async: true },
					   { src: 'plugin/notes/notes.js', async: true }
				 ]
		 });

		</script>

	</body>
</html>
